2025-07-23 08:32:56 - app.main - INFO - ‚úÖ Database initialized successfully
city_service_app  | 2025-07-23 08:32:56 - app.main - INFO - üöÄ Initializing cache system...
city_service_app  | 2025-07-23 08:32:56 - app.cache - INFO - ‚úÖ Redis connection established
city_service_app  | 2025-07-23 08:32:56 - app.cache - INFO - üöÄ Cache manager initialized
city_service_app  | 2025-07-23 08:32:56 - app.main - INFO - ‚úÖ Cache system initialized successfully
city_service_app  | 2025-07-23 08:32:56 - app.main - INFO - üì® Initializing Kafka producer...
city_service_app  | 2025-07-23 08:32:56 - app.kafka_logger - INFO - üîå Kafka connection attempt 1/5
city_service_app  | 2025-07-23 08:32:56 - app.kafka_logger - ERROR - ‚ùå Kafka connection attempt 1 failed: AIOKafkaProducer.__init__() got an unexpected keyword argument 'batch_size'
city_service_app  | 2025-07-23 08:32:56 - app.kafka_logger - INFO - ‚è≥ Retrying Kafka connection in 5 seconds...
city_service_app  | 2025-07-23 08:33:01 - app.kafka_logger - INFO - üîå Kafka connection attempt 2/5
city_service_app  | 2025-07-23 08:33:01 - app.kafka_logger - ERROR - ‚ùå Kafka connection attempt 2 failed: AIOKafkaProducer.__init__() got an unexpected keyword argument 'batch_size'
city_service_app  | 2025-07-23 08:33:01 - app.kafka_logger - INFO - ‚è≥ Retrying Kafka connection in 5 seconds...
city_service_app  | 2025-07-23 08:33:06 - app.kafka_logger - INFO - üîå Kafka connection attempt 3/5
city_service_app  | 2025-07-23 08:33:06 - app.kafka_logger - ERROR - ‚ùå Kafka connection attempt 3 failed: AIOKafkaProducer.__init__() got an unexpected keyword argument 'batch_size'
city_service_app  | 2025-07-23 08:33:06 - app.kafka_logger - INFO - ‚è≥ Retrying Kafka connection in 5 seconds...
city_service_app  | 2025-07-23 08:33:11 - app.kafka_logger - INFO - üîå Kafka connection attempt 4/5
city_service_app  | 2025-07-23 08:33:11 - app.kafka_logger - ERROR - ‚ùå Kafka connection attempt 4 failed: AIOKafkaProducer.__init__() got an unexpected keyword argument 'batch_size'
city_service_app  | 2025-07-23 08:33:11 - app.kafka_logger - INFO - ‚è≥ Retrying Kafka connection in 5 seconds...
city_service_app  | 2025-07-23 08:33:16 - app.kafka_logger - INFO - üîå Kafka connection attempt 5/5
city_service_app  | 2025-07-23 08:33:16 - app.kafka_logger - ERROR - ‚ùå Kafka connection attempt 5 failed: AIOKafkaProducer.__init__() got an unexpected keyword argument 'batch_size'
city_service_app  | 2025-07-23 08:33:16 - app.kafka_logger - ERROR - üí• All Kafka connection attempts failed - operating in degraded mode
city_service_app  | 2025-07-23 08:33:16 - app.main - INFO - ‚úÖ Kafka producer initialized successfully
city_service_app  | 2025-07-23 08:33:16 - app.main - INFO - üéâ City Service API started successfully in 20.09s
city_service_app  | 2025-07-23 08:33:16 - app.kafka_logger - WARNING - ‚ö†Ô∏è  Kafka not connected - message queued
city_service_app  | 2025-07-23 08:33:16 - app.main - ERROR - üí• Failed to start City Service API: object NoneType can't be used in 'await' expression
city_service_app  | Traceback (most recent call last):
city_service_app  |   File "/app/app/main.py", line 91, in lifespan
city_service_app  |     await log_application_startup()
city_service_app  |   File "/app/app/kafka_logger.py", line 504, in log_application_startup
city_service_app  |     await kafka_logger._send_system_event(
city_service_app  |   File "/app/app/kafka_logger.py", line 368, in _send_system_event
city_service_app  |     await self._send_message(settings.kafka_topic, event_message.to_dict())
city_service_app  |   File "/app/app/kafka_logger.py", line 253, in _send_message
city_service_app  |     await self._message_queue.put_nowait((topic, message))
city_service_app  | TypeError: object NoneType can't be used in 'await' expression
city_service_app  | ERROR:    Traceback (most recent call last):
city_service_app  |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 677, in lifespan
city_service_app  |     async with self.lifespan_context(app) as maybe_state:
city_service_app  |   File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
city_service_app  |     return await anext(self.gen)
city_service_app  |            ^^^^^^^^^^^^^^^^^^^^^
city_service_app  |   File "/app/app/main.py", line 91, in lifespan
city_service_app  |     await log_application_startup()
city_service_app  |   File "/app/app/kafka_logger.py", line 504, in log_application_startup
city_service_app  |     await kafka_logger._send_system_event(
city_service_app  |   File "/app/app/kafka_logger.py", line 368, in _send_system_event
city_service_app  |     await self._send_message(settings.kafka_topic, event_message.to_dict())
city_service_app  |   File "/app/app/kafka_logger.py", line 253, in _send_message
city_service_app  |     await self._message_queue.put_nowait((topic, message))
city_service_app  | TypeError: object NoneType can't be used in 'await' expression
city_service_app  | 
city_service_app  | ERROR:    Application startup failed. Exiting.
